var Revise=(()=>{var he=Object.defineProperty;var yn=(e,n,t)=>n in e?he(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var bn=e=>he(e,"__esModule",{value:!0});var Mn=(e,n)=>{bn(e);for(var t in n)he(e,t,{get:n[t],enumerable:!0})};var S=(e,n,t)=>(yn(e,typeof n!="symbol"?n+"":n,t),t);var kt={};Mn(kt,{Fragment:()=>En,InvariantError:()=>J,VERSION:()=>Ft,calc:()=>$e,collection:()=>fe,createContext:()=>He,debug:()=>Ze,debugSubscribe:()=>en,default:()=>Pt,effect:()=>z,flush:()=>Se,getLogLevel:()=>Fe,model:()=>xe,mount:()=>gn,nextFlush:()=>Qe,ref:()=>Ce,release:()=>oe,reset:()=>Ke,retain:()=>ie,setLogLevel:()=>ke,subscribe:()=>Ye});var J=class extends Error{constructor(n,t){super(n);S(this,"detail");this.detail=t}},y=Symbol("reviseType"),_=Symbol("dataTypeTag"),Te=Symbol("calculationType"),ae=Symbol("recalculate"),le=Symbol("observe"),de=Symbol("getSubscriptionNode"),ye=Symbol("makeModelView"),O=Symbol("flush"),be=Symbol("addDeferredWork"),se=Symbol("notify");function Ne(e){return e&&e[y]==="ref"}function Ce(e){return{[y]:"ref",current:e}}function He(e){return Object.assign(()=>e,{[y]:"context"})}function Re(e){return!!(e&&e[y]==="context")}function we(e,n){return Object.assign(e,{[y]:"calculation",[Te]:"calculation",[ae]:n})}function Ve(e,n){return Object.assign(e,{[y]:"calculation",[Te]:"effect",[ae]:n})}function Q(e){return!!(e&&e[y]==="data"&&e[_]==="model")}function Ae(e){return!!(e&&!e[y]&&!!e.model&&!!e.model[_])}function G(e){return!!(e&&e[y]==="data"&&e[_]==="collection")}function A(e){return!!(e&&e[y]==="calculation")}function De(e){return e[Te]==="effect"}function Y(e){return!!(e&&e[y]==="subscription")}function Pe(e){return!!(e&&e[y]==="nodeOrdering")}var D={error:0,warn:1,info:2,debug:3},$=D.warn;function Fe(){return $>=D.info?"info":$>=D.warn?"warn":$>=D.debug?"debug":"error"}function ke(e){vn(()=>e in D,e),$=D[e]}function We(...e){$>=D.warn&&console.warn(...e)}function L(...e){$>=D.error&&console.error(...e)}function Z(e,...n){e instanceof Error?(L(e),L(...n)):L(e,...n)}function vn(e,...n){e()||L("Invariant error",e.toString(),"is not truthy",...n)}function P(e,n){if(!e)throw L("Assertion failure",e===void 0?"undefined":e===null?"null":e.toString(),"is not truthy",n),new J(`Assertion failure: ${n}`)}function ee(e,...n){throw L("Assertion failure",e,"is not exhausted",...n),new J("Assertion failure",{context:e,items:n})}var Oe=()=>{};function ce(e,n){let t=new Map;return e.forEach(r=>{let[i,a]=n(r),c=t.get(i);c||(c=[],t.set(i,c)),c.push(a)}),t}function Ge(){return!0}function Be(e,n){return e===n}var H=class{constructor(){S(this,"nextId");S(this,"idMap");S(this,"nodesSet");S(this,"retained");S(this,"dirtyNodes");S(this,"graph");S(this,"reverseGraph");this.nextId=1,this.idMap=new WeakMap,this.nodesSet={},this.retained={},this.graph={},this.reverseGraph={},this.dirtyNodes={}}getId(n){let t=this.idMap.get(n);return t===void 0&&(t=this.nextId.toString(),this.nextId+=1,this.idMap.set(n,t)),t}addNode(n){let t=this.getId(n);return this.nodesSet[t]?!1:(this.graph[t]={},this.reverseGraph[t]={},this.nodesSet[t]=n,!0)}hasNode(n){return!!this.nodesSet[this.getId(n)]}markNodeDirty(n){let t=this.getId(n);return this.dirtyNodes[t]?!1:(this.dirtyNodes[t]=!0,!0)}addEdge(n,t,r){let i=this.getId(n),a=this.getId(t);P(!!this.nodesSet[i],"cannot add edge from node that does not exist"),P(!!this.nodesSet[a],"cannot add edge to node that does not exist"),this.graph[i][a]=(this.graph[i][a]||0)|r,this.reverseGraph[a][i]=(this.reverseGraph[a][i]||0)|r}removeEdge(n,t,r){let i=this.getId(n),a=this.getId(t);return!this.nodesSet[i]||!this.nodesSet[a]||!(this.graph[i][a]&r)?!1:(this.graph[i][a]=(this.graph[i][a]||0)&~r,this.reverseGraph[a][i]=(this.reverseGraph[a][i]||0)&~r,!0)}removeNodeInner(n){P(!this.retained[n],"attempted to remove a retained node");let t=this.getDependenciesInner(n);this.getReverseDependenciesInner(n).forEach(i=>{this.graph[i][n]=0,this.reverseGraph[n][i]=0}),t.forEach(i=>{this.reverseGraph[i][n]=0,this.graph[n][i]=0}),delete this.nodesSet[n],delete this.dirtyNodes[n],delete this.retained[n]}removeNode(n){let t=this.getId(n);return this.nodesSet[t]?(this.removeNodeInner(t),!1):!0}retain(n){let t=this.getId(n);P(!this.retained[t],"double-retain"),this.retained[t]=!0}release(n){let t=this.getId(n);P(this.retained[t],"double-release"),delete this.retained[t]}removeIncoming(n){let t=this.getId(n);this.getReverseDependenciesInner(t).forEach(i=>{this.reverseGraph[t][i]&H.EDGE_HARD&&(this.graph[i][t]=(this.graph[i][t]||0)&~H.EDGE_HARD,this.reverseGraph[t][i]=(this.reverseGraph[t][i]||0)&~H.EDGE_HARD)})}getDependenciesInner(n,t=H.EDGE_ANY){return this.graph[n]?Object.keys(this.graph[n]).filter(r=>(this.graph[n][r]||0)&t):[]}getReverseDependenciesInner(n){return this.reverseGraph[n]?Object.keys(this.reverseGraph[n]).filter(t=>!!this.reverseGraph[n][t]):[]}getDependencies(n,t=H.EDGE_ANY){let r=this.getId(n);return this.getDependenciesInner(r,t).map(i=>this.nodesSet[i])}process(n){let t={},r={},i=[],a=[],c=o=>{if(t[o])return r[o];t[o]=!0,r[o]=this.retained[o];let d=this.getDependenciesInner(o),s=!1;return d.forEach(u=>{c(u)&&(s=!0)}),s&&(r[o]=!0),i.push(o),r[o]?!0:(a.push(o),!1)};Object.keys(this.dirtyNodes).forEach(o=>{c(o)});for(let o=i.length-1;o>=0;--o){let d=i[o];if(this.dirtyNodes[d]&&r[d]){let s=this.nodesSet[d];n(s)||this.getDependenciesInner(d).forEach(f=>{this.graph[d][f]&H.EDGE_HARD&&(this.dirtyNodes[f]=!0)}),delete this.dirtyNodes[d]}}a.forEach(o=>{this.removeNodeInner(o)})}graphviz(n){let t=["digraph dag {",'node [style="filled", fillcolor="#DDDDDD"];'],r=Object.keys(this.nodesSet).filter(o=>!!this.nodesSet[o]),i={};r.forEach(o=>{i[o]=n(o,this.nodesSet[o])});let a=ce(r,o=>[i[o].subgraph,o]),c=0;return a.forEach((o,d)=>{d&&t.push(`subgraph cluster_${c++} {`,'style="filled";','color="#AAAAAA";'),o.forEach(s=>{let u={shape:this.retained[s]?"box":"ellipse",label:i[s].label,penwidth:i[s].penwidth,fillcolor:this.dirtyNodes[s]?"#FFDDDD":"#DDDDDD"};t.push(`  item_${s} [${Object.entries(u).map(([p,f])=>`${p}=${JSON.stringify(f)}`).join(",")}];`)}),d&&t.push("}")}),r.forEach(o=>{this.getDependenciesInner(o).forEach(d=>{this.graph[o][d]&H.EDGE_HARD&&t.push(`  item_${o} -> item_${d} [style="solid"];`),this.graph[o][d]&H.EDGE_SOFT&&t.push(`  item_${o} -> item_${d} [style="dashed"];`)})}),t.push("}"),t.join(`
`)}},I=H;S(I,"EDGE_NONE",0),S(I,"EDGE_SOFT",1),S(I,"EDGE_HARD",2),S(I,"EDGE_ANY",3);var F=new WeakMap;function Ue(){F=new WeakMap}function ne(e){return""}function V(e,n){return e}var B=[],b=new I,te=new WeakMap;function Ke(){B=[],b=new I,te=new WeakMap,Ue()}function $e(e,n,t){typeof n=="string"&&(t=n),typeof n!="function"&&(n=Be),typeof t!="string"&&(t=void 0);let r=ze(e,n,!1);return t&&V(r,t),r}function z(e,n){let t=ze(e,Ge,!0);return n&&V(t,n),t}function re(e){B.push(null);let n=e();return B.pop(),n}function ze(e,n,t){if(typeof e!="function")throw new J("calculation must be provided a function");let r,i=t?Ve(a,c):we(a,c);function a(){if(t||ue(i),r)return r.result;if(b.removeIncoming(i),B.push(i),r={result:e()},B.pop()!==i)throw new J("Active calculation stack inconsistency!");return r.result}b.addNode(i);function c(){if(!r)return i(),!1;let o=r.result;r=void 0;let d=i(),s=n(o,d);return s&&(r={result:o}),s}return i}function ue(e){let n=B[B.length-1];n&&(b.addNode(e),b.hasNode(n)||b.addNode(n),b.addEdge(e,n,I.EDGE_HARD))}function Me(e,n){b.addNode(e),b.addNode(n),b.addEdge(e,n,I.EDGE_HARD)}function X(e,n){b.addNode(e),b.addNode(n),b.addEdge(e,n,I.EDGE_SOFT)}function je(e,n){b.removeEdge(e,n,I.EDGE_HARD)}function R(e,n){b.removeEdge(e,n,I.EDGE_SOFT)}function U(e){if(b.addNode(e),b.getDependencies(e,I.EDGE_HARD).length>0){let t=b.markNodeDirty(e);j||(j=!0,Sn())}}var j=!1,qe=Promise.resolve(),_e=Oe,ve=()=>setTimeout(()=>Se(),0);function Qe(){return j?qe:Promise.resolve()}function Ye(e){ve=e,j&&ve()}function Sn(){try{qe=new Promise(e=>{_e=e}),ve()}catch(e){Z(e,"uncaught exception in notify")}}var In=null;function Se(){!j||(j=!1,b.process(e=>{let n=!1;return A(e)?n=e[ae]():G(e)?e[O]():Q(e)?e[O]():Y(e)&&e[O](),n}),_e())}function ie(e){let n=te.get(e)??0,t=n+1;n===0&&(b.hasNode(e)||b.addNode(e),b.retain(e)),te.set(e,t)}function oe(e){let n=te.get(e)??0,t=Math.min(n-1,0);n<1&&L(`release called on unretained item ${ne(e)}`,e),t<1&&b.release(e),te.set(e,t)}function Ze(e){return b.graphviz((n,t)=>{let r;return Q(t)&&(r=t),G(t)&&(r=t),Ae(t)&&(r=t.model),Y(t)&&(r=t.item),{label:`${n}
${ne(t)}`,subgraph:r,penwidth:e===t?"5.0":"1.0"}})}function en(e){In=e}function nn(e){return!!(e&&typeof e=="object"&&!Array.isArray(e)&&e[y]==="element")}function tn(e){return!!(e&&typeof e=="object"&&!Array.isArray(e)&&e[y]==="component")}function rn(e){return!!(e&&typeof e=="object"&&!Array.isArray(e)&&e[y]==="provider")}function on(e){if(!!e)return""}function Jn(e){if(e!==void 0)return typeof e=="number"?e:parseInt(e)}function Xn(e){if(e!==void 0)return e!=="no"}var l={accesskey:{idlName:"accessKey"},"aria-atomic":{idlName:"ariaAtomic"},"aria-autocomplete":{idlName:"ariaAutoComplete"},"aria-busy":{idlName:"ariaBusy"},"aria-checked":{idlName:"ariaChecked"},"aria-colcount":{idlName:"ariaColCount"},"aria-colindex":{idlName:"ariaColIndex"},"aria-colindextext":{idlName:"ariaColIndexText"},"aria-colspan":{idlName:"ariaColSpan"},"aria-current":{idlName:"ariaCurrent"},"aria-disabled":{idlName:"ariaDisabled"},"aria-expanded":{idlName:"ariaExpanded"},"aria-haspopup":{idlName:"ariaHasPopup"},"aria-hidden":{idlName:"ariaHidden"},"aria-invalid":{idlName:"ariaInvalid"},"aria-keyshortcuts":{idlName:"ariaKeyShortcuts"},"aria-label":{idlName:"ariaLabel"},"aria-level":{idlName:"ariaLevel"},"aria-live":{idlName:"ariaLive"},"aria-modal":{idlName:"ariaModal"},"aria-multiline":{idlName:"ariaMultiLine"},"aria-multiselectable":{idlName:"ariaMultiSelectable"},"aria-orientation":{idlName:"ariaOrientation"},"aria-placeholder":{idlName:"ariaPlaceholder"},"aria-posinset":{idlName:"ariaPosInSet"},"aria-pressed":{idlName:"ariaPressed"},"aria-readonly":{idlName:"ariaReadOnly"},"aria-required":{idlName:"ariaRequired"},"aria-roledescription":{idlName:"ariaRoleDescription"},"aria-rowcount":{idlName:"ariaRowCount"},"aria-rowindex":{idlName:"ariaRowIndex"},"aria-rowindextext":{idlName:"ariaRowIndexText"},"aria-rowspan":{idlName:"ariaRowSpan"},"aria-selected":{idlName:"ariaSelected"},"aria-setsize":{idlName:"ariaSetSize"},"aria-sort":{idlName:"ariaSort"},"aria-valuemax":{idlName:"ariaValueMax"},"aria-valuemin":{idlName:"ariaValueMin"},"aria-valuenow":{idlName:"ariaValueNow"},"aria-valuetext":{idlName:"ariaValueText"},autocapitalize:{},autofocus:{},class:{idlName:"className"},contenteditable:{idlName:"contentEditable"},dir:{},draggable:{},enterkeyhint:{idlName:"enterKeyHint"},hidden:{},id:{},inputmode:{idlName:"inputMode"},is:{idlName:null},itemid:{idlName:null},itemprop:{idlName:null},itemref:{idlName:null},itemscope:{idlName:null},itemtype:{idlName:null},lang:{},nonce:{},role:{},slot:{},spellcheck:{},style:{},tabindex:{idlName:"tabIndex",makeIdlValue:Jn},title:{},translate:{makeIdlValue:Xn}},xn={...l,href:{},target:{},download:{},ping:{},rel:{},hreflang:{},type:{},referrerpolicy:{idlName:"referrerPolicy"}},Ln={...l,alt:{},coords:{},shape:{},href:{},target:{},download:{},ping:{},rel:{},referrerpolicy:{idlName:"referrerPolicy"}},Nn={...l,src:{},crossorigin:{idlName:"crossOrigin"},preload:{},autoplay:{},loop:{makeIdlValue:on},muted:{},controls:{}},Cn={...l},Hn={...l,href:{},target:{}},Rn={...l},wn={...l,disabled:{},form:{idlName:null},formaction:{idlName:"formAction"},formenctype:{idlName:"formEnctype"},formmethod:{idlName:"formMethod"},formnovalidate:{idlName:"formNoValidate"},formtarget:{idlName:"formTarget"},name:{},type:{},value:{}},Vn={...l,width:{},height:{}},An={...l},Dn={...l,value:{}},Pn={...l},Fn={...l,open:{}},kn={...l,open:{}},Wn={...l},On={...l,src:{},type:{},width:{},height:{}},Gn={...l,disabled:{},form:{idlName:null},name:{}},Bn={...l,"accept-charset":{idlName:"acceptCharset"},action:{},autocomplete:{},enctype:{},method:{},name:{},novalidate:{idlName:"noValidate"},target:{},rel:{}},Un={...l},Kn={...l},$n={...l},zn={...l},jn={...l,src:{},srcdoc:{},name:{},sandbox:{},allow:{},allowfullscreen:{idlName:"allowFullscreen"},width:{},height:{},referrerpolicy:{idlName:"referrerPolicy"},loading:{}},qn={...l,alt:{},src:{},srcset:{},sizes:{},crossorigin:{idlName:"crossOrigin"},usemap:{idlName:"useMap"},ismap:{idlName:"isMap"},width:{},height:{},referrerpolicy:{idlName:"referrerPolicy"},decoding:{},loading:{}},_n={...l,accept:{},alt:{},autocomplete:{},checked:{},dirname:{idlName:"dirName"},disabled:{},form:{},formaction:{idlName:"formAction"},formenctype:{idlName:"formEnctype"},formmethod:{idlName:"formMethod"},formnovalidate:{idlName:"formNoValidate"},formtarget:{idlName:"formTarget"},height:{},indeterminate:{makeAttrValue:null},list:{},max:{},maxlength:{},min:{},minlength:{idlName:"minLength"},multiple:{},name:{},pattern:{},placeholder:{},readonly:{idlName:"readOnly"},required:{},size:{},src:{},step:{},type:{},value:{},width:{}},an={...l,cite:{},datetime:{idlName:"dateTime"}},Qn={...l,for:{idlName:"htmlFor"}},Yn={...l},Zn={...l,value:{}},et={...l,href:{},crossorigin:{idlName:"crossOrigin"},rel:{},media:{},integrity:{},hreflang:{},type:{},referrerpolicy:{idlName:"referrerPolicy"},sizes:{},imagesrcset:{idlName:"imageSrcset"},imagesizes:{idlName:"imageSizes"},as:{},color:{idlName:null},disabled:{}},nt={...l,name:{}},tt={...l},rt={...l,name:{},"http-equiv":{idlName:"httpEquiv"},content:{},charset:{idlName:null},media:{}},it={...l,value:{},min:{},max:{},low:{},high:{},optimum:{}},ot={...l,data:{},type:{},name:{},form:{idlName:null},width:{},height:{}},at={...l,reversed:{},start:{},type:{}},lt={...l,disabled:{},label:{}},dt={...l,disabled:{},label:{},selected:{},value:{}},st={...l,for:{idlName:"htmlFor"},form:{idlName:null},name:{}},ct={...l},ut={...l,name:{},value:{}},mt={...l},ft={...l},pt={...l,value:{},max:{}},gt={...l,cite:{}},Et={...l,src:{},type:{},nomodule:{idlName:"noModule"},async:{},defer:{},crossorigin:{idlName:"crossOrigin"},integrity:{},referrerpolicy:{idlName:"referrerPolicy"}},ht={...l,autocomplete:{},disabled:{},form:{idlName:null},multiple:{},name:{},required:{},size:{},value:{makeAttrValue:null}},Tt={...l,name:{}},yt={...l,type:{},src:{},srcset:{},sizes:{},media:{},width:{},height:{}},bt={...l},Mt={...l,media:{}},vt={...l},St={...l},Ie={...l},It={...l,colspan:{idlName:"colSpan"},rowspan:{idlName:"rowSpan"},headers:{}},ln={...l,span:{}},Jt={...l},Xt={...l,autocomplete:{},cols:{},dirname:{idlName:"dirName"},disabled:{},form:{idlName:null},maxlength:{idlName:"maxLength"},minlength:{idlName:"minLength"},name:{},placeholder:{},readonly:{idlName:"readOnly"},required:{},rows:{},wrap:{}},xt={...l,datetime:{idlName:"dateTime"}},Lt={...l},Nt={...l},Ct={...l,kind:{},src:{},srclang:{},label:{},default:{}},Ht={...l},Rt={...l,src:{},crossorigin:{idlName:"crossOrigin"},preload:{},autoplay:{},loop:{makeIdlValue:on},muted:{},controls:{},poster:{},playsinline:{idlName:"playsInline"},width:{},height:{}},wt={a:xn,abbr:l,address:l,area:Ln,article:l,aside:l,audio:Nn,b:l,base:Hn,bdi:l,bdo:l,blockquote:l,body:Rn,br:Cn,button:wn,canvas:Vn,caption:St,cite:l,code:l,col:ln,colgroup:ln,data:Dn,datalist:Pn,dd:l,del:an,details:Fn,dfn:l,dialog:kn,div:Wn,dl:An,dt:l,em:l,embed:On,fieldset:Gn,figcaption:l,figure:l,footer:l,form:Bn,h1:l,h2:l,h3:l,h4:l,h5:l,h6:l,head:Kn,header:l,heading:Un,hgroup:l,hr:$n,html:zn,i:l,iframe:jn,image:qn,img:l,input:_n,ins:an,kbd:l,label:Qn,legend:Yn,li:Zn,link:et,main:l,map:nt,mark:l,menu:tt,meta:rt,meter:it,nav:l,noscript:l,object:ot,ol:at,optgroup:lt,option:dt,output:st,p:ct,param:ut,picture:mt,pre:ft,progress:pt,quote:gt,rp:l,rt:l,ruby:l,s:l,samp:l,script:Et,section:l,select:ht,slot:Tt,small:l,source:yt,span:bt,strong:l,style:Mt,sub:l,summary:l,sup:l,table:vt,tbody:Ie,td:It,template:Jt,textarea:Xt,tfoot:Ie,th:l,thead:Ie,time:xt,title:Lt,tr:Nt,track:Ct,u:l,ul:Ht,var:l,video:Rt,wbr:l};function dn(e,n){return wt[e]?.[n]}function sn({domNode:e}){let n={domNode:e,children:[],domParent:null,mountFragment:document.createDocumentFragment(),jsxNode:null,onMount:[],onUnmount:[]};return n.domParent=n,n}function N({jsxNode:e,domNode:n,domParent:t,onMount:r,onUnmount:i}){return{domNode:n,children:[],domParent:t,mountFragment:n?document.createDocumentFragment():null,jsxNode:e,onMount:r,onUnmount:i}}function cn(e){let n=[];function t(r){r.domNode?n.push(r.domNode):r.children.forEach(i=>t(i))}return t(e),n}function Vt(e,n,t){let r=0;function i(c){return c.domNode?(r+=1,!1):a(c)}function a(c){let o=c===n?t:c.children.length;for(let d=0;d<o;++d)if(i(c.children[d]))return!0;return c===n}return a(e),r}function me(e){e.children.forEach(n=>me(n)),e.onMount&&e.onMount.forEach(n=>{try{n()}catch(t){Z(t,"VNode node raised exception in onMount",e)}})}function un(e){e.children.forEach(n=>un(n)),e.onUnmount&&e.onUnmount.forEach(n=>{try{n()}catch(t){Z(t,"VNode node raised exception in onUnmount",e)}})}function C(e){e.domNode&&e.domParent.mountFragment&&e.domParent.mountFragment.appendChild(e.domNode)}function k(e,n,t,r,{dispose:i=!0,runOnMount:a=!0,runOnUnmount:c=!0}={}){let o;e.children[n]?o=e.children[n].domParent:(n=e.children.length,o=e.domNode?e:e.domParent),P(o,"tried to replace a root tree slot with missing domParent");let d=e.children.splice(n,t,...r),s=[];if(d.forEach(f=>{c&&un(f),cn(f).forEach(g=>{g.parentNode&&s.push([g.parentNode,g])}),i&&(f.domParent=null,f.mountFragment=null,f.children=null,f.domNode=null,f.onMount=null,f.onUnmount=null)}),ce(s,f=>f).forEach((f,E)=>{E.childNodes.length===f.length?E.replaceChildren():f.forEach(g=>E.removeChild(g))}),!o.domNode)throw new Error("Invariant: domParent missing domNode");let p=o.domNode;if(r.length>0){let f=Vt(o,e,n),E=p.childNodes[f],g=document.createDocumentFragment();for(let h=0;h<r.length;++h){let x=r[h];x.domParent=o,cn(x).forEach(ge=>{g.appendChild(ge)})}p.insertBefore(g,E||null),a&&r.forEach(h=>{me(h)})}return d}function mn(e,n,...t){return typeof e=="string"?{[y]:"element",element:e,props:n,children:t}:Re(e)?{[y]:"provider",context:e,value:n.value,children:t}:{[y]:"component",component:e,props:n,children:t}}var fn=new WeakMap;function pn(e,n,t,r){if(t.startsWith("on:")&&typeof r=="function"){let i=t.slice(3),a=fn.get(n);a||(a={},fn.set(n,a)),a[t]&&n.removeEventListener(i,a[t]),n.addEventListener(i,r),a[t]=r}else{let i=dn(e,t);if(i){if(i.makeAttrValue!==null){let a=i.makeAttrValue?i.makeAttrValue(r):r;a==null||a===!1?n.removeAttribute(t):a===!0?n.setAttribute(t,""):n.setAttribute(t,a)}i.idlName!==null&&(n[i.idlName??t]=i.makeIdlValue?i.makeIdlValue(r):r)}else r===!1||r===void 0||r===null?n.removeAttribute(t):r===!0?n.setAttribute(t,""):typeof r=="string"&&n.setAttribute(t,r)}}function W({domParent:e,jsxNode:n,contextMap:t,parentNodeOrdering:r}){if(n==null||n===!1||n===!0){let i=N({domParent:e,jsxNode:n,domNode:null,onMount:[],onUnmount:[]});return C(i),i}if(typeof n=="string"){let i=N({domParent:e,jsxNode:n,domNode:document.createTextNode(n),onMount:[],onUnmount:[]});return C(i),i}if(typeof n=="number"){let i=N({domParent:e,jsxNode:n,domNode:document.createTextNode(n.toString()),onMount:[],onUnmount:[]});return C(i),i}if(nn(n)){let i=document.createElement(n.element),a=[],c;n.props&&Object.entries(n.props).forEach(([d,s])=>{if(d==="ref"){if(Ne(s)){s.current=i;return}if(typeof s=="function"&&!A(s)){c=s;return}}if(A(s)){let u=z(()=>{let p=s();pn(n.element,i,d,p)},`viewattr:${d}`);a.push(()=>{R(u,r)}),X(u,r),u()}else pn(n.element,i,d,s)});let o=N({domParent:e,jsxNode:n,domNode:i,onMount:[()=>{c&&c(i)}],onUnmount:[()=>{a.forEach(d=>d()),c&&c(void 0)}]});return o.children=n.children.map(d=>W({domParent:o,jsxNode:d,contextMap:t,parentNodeOrdering:r})),o.mountFragment&&(i.appendChild(o.mountFragment),o.mountFragment=null),C(o),o}if(G(n)){let i=n,a=[],c=N({domParent:e,jsxNode:n,domNode:null,onMount:[],onUnmount:a}),o=Je("viewcoll:order");X(o,r),a.push(()=>{R(o,r)}),re(()=>{c.children.push(...i.map(u=>W({domParent:c.domParent,jsxNode:u,contextMap:t,parentNodeOrdering:o})))});let d=i[le](u=>{u.forEach(p=>{if(p.type==="splice")re(()=>{let{count:f,index:E,items:g}=p,h=g.map(x=>W({domParent:c.domParent,jsxNode:x,contextMap:t,parentNodeOrdering:o}));k(c,E,f,h)});else if(p.type==="move"){let{fromIndex:f,fromCount:E,toIndex:g}=p,h=k(c,f,E,[],{dispose:!1,runOnUnmount:!1});k(c,f<g?g-E:g,0,h,{runOnMount:!1})}else if(p.type==="sort"){let{indexes:f}=p,E=k(c,0,f.length,[],{dispose:!1,runOnUnmount:!1}),g=f.map(h=>E[h]);k(c,0,0,g,{runOnMount:!1})}else ee(p,"unhandled collection event")})}),s=i[de]();return X(s,o),a.push(d),a.push(()=>{R(s,o)}),C(c),c}if(A(n)){let i=n,a=[],c=N({domParent:e,jsxNode:n,domNode:null,onMount:[],onUnmount:a}),o=Je("viewcalc:order");X(o,r),a.push(()=>{R(o,r)});let d=!0,s=z(()=>{let u=i(),p=W({domParent:c.domParent,jsxNode:u,contextMap:t,parentNodeOrdering:o});d?(d=!1,c.children.push(p)):k(c,0,c.children.length,[p])},`viewcalc:${ne(n)??"node"}`);return a.push(()=>{R(s,o)}),X(s,o),s(),C(c),c}if(rn(n)){let i=n,a=N({domParent:e,jsxNode:n,domNode:null,onMount:[],onUnmount:[]}),c=new Map(t);return c.set(i.context,i.value),a.children.push(...i.children.map(o=>W({domParent:e,jsxNode:o,contextMap:c,parentNodeOrdering:r}))),C(a),a}if(tn(n)){let i=[],a=N({domParent:e,jsxNode:n,domNode:null,onMount:[],onUnmount:i}),c=n.component,o=[],d=c({...n.props||{},children:n.children},{onUnmount:u=>{i.push(u)},onMount:u=>{o.push(u)},onEffect:(u,p)=>{let f=z(u,`componenteffect:${n.component.name}:${p??o.length}`);o.push(()=>{ie(f),X(r,f),f()}),i.push(()=>{R(r,f),oe(f)})},getContext:u=>t.has(u)?t.get(u):u()}),s=W({domParent:a.domParent,jsxNode:d,contextMap:t,parentNodeOrdering:r});return a.children.push(s),o.forEach(u=>a.onMount.push(u)),C(a),a}if(Array.isArray(n)){let i=n,a=N({domParent:e,jsxNode:n,domNode:null,onMount:[],onUnmount:[]});return a.children.push(...i.map(c=>W({domParent:e,jsxNode:c,contextMap:t,parentNodeOrdering:r}))),C(a),a}if(typeof n=="function"){let i=N({domParent:e,jsxNode:n,domNode:null,onMount:[],onUnmount:[]});return We("Attempted to render JSX node that was a function, not rendering anything"),C(i),i}ee(n,"unexpected render type")}function Je(e){let n={[y]:"nodeOrdering"};return e&&V(n,e),n}function gn(e,n){let t=Je("mount");ie(t);let r=sn({domNode:e});return r.children.push(W({domParent:r,jsxNode:n,contextMap:new Map,parentNodeOrdering:t})),r.mountFragment&&(e.appendChild(r.mountFragment),r.mountFragment=null),me(r),()=>{k(r,0,r.children.length,[]),oe(t)}}var En=({children:e})=>e;function hn(e,n){if(e===void 0&&n===void 0)return 0;if(e===void 0)return 1;if(n===void 0)return-1;let t=""+e,r=""+n;return t<r?-1:t>r?1:0}function fe(e,n){if(!Array.isArray(e))throw new J("collection must be provided an array");return pe(e,"collection",{get(t,r,i){return r[i]},has(t,r,i){return i in r},set(t,r,i,a){if(i==="length"&&typeof a=="number"&&a<r.length)return this.splice(a,r.length-a),!0;let c=Number(i);return!isNaN(c)&&c<=e.length?this.splice(c,1,a):r[i]=a,!0},deleteProperty(t,r,i){return delete r[i],!0}},({notify:t,subscriptionNode:r,makeView:i,processFieldChange:a,processFieldDelete:c})=>({splice:function(d,s,...u){if(s<1&&u.length===0)return[];let p=e.length,f=e.splice(d,s,...u),E=e.length;if(t({type:"splice",index:d,count:s,items:u,removed:f}),p===E)for(let g=d;g<d+s;++g)a(g.toString());else{for(let g=d;g<Math.max(E,p);++g){let h=g.toString();g>=E?c(h):a(h)}a("length")}return f},pop:function(){return this.splice(e.length-1,1)[0]},shift:function(){return this.splice(0,1)[0]},push:function(...d){return this.splice(e.length,0,...d),e.length},unshift:function(...d){return this.splice(0,0,...d),e.length},reject:function(d){for(let s=e.length-1;s>=0;--s)d(this[s],s)&&this.splice(s,1)},moveSlice:function(d,s,u){if(s<=0||u>=d&&u<d+s)return;let p=e.splice(d,s);u<d?e.splice(u,0,...p):e.splice(u-s,0,...p),t({type:"move",fromIndex:d,fromCount:s,toIndex:u,moved:p})},sort:function(d=hn){let s=e.map((u,p)=>[u,p]);return e.sort(d),s.sort((u,p)=>d(u[0],p[0])),t({type:"sort",indexes:s.map(u=>u[1])}),this},reverse:function(d=hn){if(e.length===0)return this;e.reverse();let s=[];for(let u=e.length-1;u>=0;--u)s.push(u);return t({type:"sort",indexes:s}),this},makeView:i,mapView:function(d,s){return At(this,d,s)},filterView:function(d,s){return Dt(this,d,s)},flatMapView:function(d,s){return Xe(this,d,s)}}),n)}function At(e,n,t){return Xe(e,r=>[n(r)],t)}function Dt(e,n,t){return Xe(e,r=>n(r)?[r]:[],t)}function Xe(e,n,t){let r=[];return e.makeView({initialize:i=>{let a=[];return i.forEach(c=>{let o=n(c);a.push(...o),r.push(o.length)}),a},processEvent:(i,a,c)=>{if(a.type==="splice"){let{index:o,count:d,items:s}=a,u=0;for(let g=0;g<o;++g)u+=r[g];let p=0;for(let g=o;g<o+d;++g)p+=r[g];let f=[],E=[];s.forEach(g=>{let h=n(g);f.push(...h),E.push(h.length)}),i.splice(u,p,...f),r.splice(o,d,...E)}else if(a.type==="move"){let{fromIndex:o,fromCount:d,toIndex:s}=a,u=0;for(let p=o;p<o+d;++p)u+=r[p];if(u>0){let p=0,f=0,E=Math.max(o,s),g=0;for(let h=0;h<=E;++h)h===o&&(p=g),h===s&&(f=g),g+=r[h];i.moveSlice(p,u,f)}r.splice(s,0,...r.splice(o,d))}else if(a.type==="sort"){let{indexes:o}=a,d=[],s=0;for(let E=0;E<r.length;++E)d.push(s),s+=r[E];let u=c.slice(),p=[],f=0;o.forEach(E=>{let g=r[E];if(g===0)return;let h=d[E];for(let x=0;x<g;++x)p.push(h+x),c[f]=u[h+x],f+=1}),i[se]({type:"sort",indexes:p})}else ee(a,"unhandled collection event type")}},t)}function pe(e,n,t,r,i){let a=new Map,c=new Map,o=[],d=[],s={[y]:"subscription",[O]:u,item:null};V(s,`${i||"?"}:sub`);function u(){let T=c;c=new Map,T.forEach((m,M)=>{M(m)})}function p(){let T=d;d=[],T.forEach(m=>{m()})}function f(T){d.push(T),U(v)}function E(T){o.length>0&&(o.forEach(m=>{let M=c.get(m);M||(M=[],c.set(m,M)),M.push(T)}),U(s))}function g(){return s}function h(T){return o.length===0&&(Me(v,s),a.forEach(m=>{X(v,m),X(m,s)})),o.push(T),()=>{o=o.filter(m=>m!==T),o.length===0&&(je(v,s),a.forEach(m=>{R(v,m),R(m,s)}))}}function x(T,m){let M=re(()=>T.initialize(e)),w=fe(M,m);return h(Ee=>{w[be](()=>{Ee.forEach(Tn=>{T.processEvent(w,Tn,M)})})}),Me(s,w),w}function Le(T){let m=K(T);U(m)}function ge(T){let m=K(T);U(m)}let q={[y]:"data",[_]:n,[O]:p,[be]:f,[le]:h,[se]:E,[de]:g,...r({observe:h,notify:E,makeView:x,subscriptionNode:s,processFieldChange:Le,processFieldDelete:ge})};function K(T){let m=a.get(T);return m||(m={model:v,key:T},i&&V(m,i),a.set(T,m),o.length>0&&(X(v,m),X(m,s))),m}let v=new Proxy(e,{get(T,m){if(m in q)return q[m];let M=K(m);return ue(M),t.get.call(v,E,T,m)},has(T,m){if(m in q)return!0;let M=K(m);return ue(M),t.has.call(v,E,T,m)},set(T,m,M){if(m in q)return L(`Overriding ${String(m)} not supported`,m),!1;let w=t.set.call(v,E,T,m,M);if(w){let Ee=K(m);U(Ee)}return w},deleteProperty(T,m){if(m in q)return L(`Deleting ${String(m)} not supported`,m),!1;let M=t.deleteProperty.call(v,E,T,m);if(M){let w=K(m);U(w)}return M}});return s.item=v,i&&V(v,i),v}function xe(e,n){if(typeof e!="object"||!e)throw new J("model must be provided an object");let t=new Set(Object.keys(e));return pe(e,"model",{get:(r,i,a)=>i[a],has:(r,i,a)=>t.has(a),set:(r,i,a,c)=>{let o=!t.has(a)||i[a]!==c;return i[a]=c,o&&(t.has(a)||(t.add(a),r({type:"add",key:a})),r({type:"set",key:a,value:c})),!0},deleteProperty:(r,i,a)=>{let c=t.has(a);return delete i[a],c&&(t.delete(a),r({type:"delete",key:a})),!0}},({makeView:r,notify:i,observe:a,subscriptionNode:c})=>({[ye]:r}),n)}xe.keys=function(n,t){let r=new Set;return n[ye]({initialize:a=>{let c=Object.keys(a);return c.forEach(o=>r.add(o)),c},processEvent:(a,c)=>{if(c.type==="add"){let{key:o}=c;if(typeof o=="number"||typeof o=="string"){let d=o.toString();r.has(d)||(r.add(d),a.push(d))}}else if(c.type==="delete"){let{key:o}=c;if(typeof o=="number"||typeof o=="string"){let d=o.toString();r.has(d)&&(r.delete(d),a.reject(s=>s===d))}}}},t)};var Pt=mn,Ft="0.5.0";return kt;})();
//# sourceMappingURL=index.min.js.map
